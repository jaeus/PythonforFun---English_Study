import pandas as pds
import time

rawdata = pds.read_csv('GRAMMAR PRACTICE.csv')
rfnddt = rawdata.fillna(value=' ').copy()


def listinitializing(inputdt):
    defchno = []
    defistart = []
    defiend = []
    for i in range(len(inputdt)):
        if inputdt.loc[i][0] != ' ':
            defchno.append(i)
    for j in range(len(defchno)):
        defistart.append(defchno[j])
        if j == len(defchno)-1:
            defiend.append(len(inputdt))
        else:
            defiend.append(defchno[j+1])
    
    return(defchno, defistart, defiend)


def defandexpprint(inputdt, defistart, defiend, j):
    for i in range(defistart[j], defiend[j]):
        if inputdt.loc[i][2] != ' ':
            if inputdt.loc[i][3] != ' ':
                print('++ %s\n=> %s' %(inputdt.loc[i][2], inputdt.loc[i][3]))
            else:
                print('++ %s' %(inputdt.loc[i][2]))



answer = ''
chno = listinitializing(rfnddt)[0]
istart = listinitializing(rfnddt)[1]
iend = listinitializing(rfnddt)[2]

while answer != 'end':
    print("CHOOSE A MODE\n1-The grammar list is shown and pick any chapters\n2-Practice from the beginning\n3-Show whole chapter")
    selectmode = 0
    while 1:
        time.sleep(0.3)
        if selectmode == 1 or selectmode == 2 or selectmode == 3:
            break
        else:
            selectmode = int(input('Enter either 1 or 2 or 3 : '))
        
    if selectmode == 1:
        for i in range(len(chno)):
            print('Chapter %s  %s' %(int(rfnddt.loc[istart[i]][0]), rfnddt.loc[istart[i]][1]))
        
        while answer != 'end':
            time.sleep(0.3)
            while 1:
                ch = int(input('Type a chapter number : '))
                for i in range(len(istart)):
                    if ch == int(rfnddt.loc[istart[i]][0]):
                        indexno = i
                        break
                if ch == int(rfnddt.loc[istart[i]][0]):
                    break
                else:
                    print('TYPE A PROPER CHAPTER NUMBER ON THE LIST')
                    
            defandexpprint(rfnddt, istart, iend, indexno)
            for i in range(istart[indexno], iend[indexno]):
                for j in range(4, 13):
                    if rfnddt.loc[i][j] != ' ':
                        answer = ''
                        while answer != 'iquit' and answer != 'end':
                            print(rfnddt.loc[i][j])
                            time.sleep(0.3)
                            answer = input()
                            if answer == rfnddt.loc[i][j]:
                                break
                            elif answer == 'n':
                                break
                    if answer == 'iquit' or answer == 'end':
                        break
                if answer == 'iquit' or answer == 'end':
                    break
            if answer != 'end':
                print('END OF THE CHAPTER')
                
                
#mode 2 and 3 are being coded
